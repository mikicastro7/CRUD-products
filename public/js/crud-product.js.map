{"version":3,"sources":["webpack:///./resources/js/crud-product.js"],"names":["productId","$","on","e","name","val","description","price","ajax","method","url","data","attr","fail","response","errors","key","responseJSON","toastr","error","done","success","message","modal","formatObject","product","children","eq","text","parseInt","toFixed","updated_at","split","join","slice","productObject","id","created_at","this","parent","get","remove","preventDefault","addRow","formatedObject","append","delegate","siblings"],"mappings":"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","file":"/js/crud-product.js","sourcesContent":["let productId = 0;\n\n$('.edit-product-btn').on('click', function (e) {\n    const name = $('#name-modal').val();\n    const description = $('#description-modal').val();\n    const price = $('#price-modal').val();\n\n    $.ajax({\n        method: \"PUT\",\n        url: \"/product_edit/\" + productId,\n        data: {\n            \"_token\": $(\"meta[name='csrf-token']\").attr(\"content\"),\n            name,\n            description,\n            price\n        }\n    }).fail(function (response) {\n        let errors = \"\";\n        for (const key in response.responseJSON.errors) {\n            errors += response.responseJSON.errors[key] + \" \";\n        };\n        toastr.error(errors);\n    }).done(function (response) {\n        toastr.success(response.message);\n        $(\"#editModal\").modal('hide');\n\n        const formatedObject = formatObject(response.product)\n        $(\"table #\" + productId).children().eq(1).text(response.product.name);\n        $(\"table #\" + productId).children().eq(2).text(response.product.description);\n        $(\"table #\" + productId).children().eq(3).text(parseInt(response.product.price).toFixed(4));\n        $(\"table #\" + productId).children().eq(5).text(response.product.updated_at.split(\"T\").join(\" \").slice(0, 19));\n    })\n})\n\nconst formatObject = function (productObject) {\n    const objectFormated = {\n        id: productObject.id,\n        name: productObject.name,\n        description: productObject.description === null ? \"\" : productObject.description,\n        price: parseInt(productObject.price).toFixed(4),\n        created_at: productObject.created_at.split(\"T\").join(\" \").slice(0, 19),\n        updated_at: productObject.updated_at.split(\"T\").join(\" \").slice(0, 19)\n    }\n    return objectFormated;\n}\n\n$('.delete-btn').on('click', function (e) {\n    let productId = $(this).parent().parent().get(0).id;\n\n    $.ajax({\n        method: \"DELETE\",\n        url: \"/product_delete/\" + productId,\n        data: {\n            \"_token\": $(\"meta[name='csrf-token']\").attr(\"content\"),\n        }\n    }).fail(function (response) {\n        let errors = \"\";\n        for (const key in response.responseJSON.errors) {\n            errors += response.responseJSON.errors[key] + \" \";\n        }\n        toastr.error(errors);\n    }).done(function (response) {\n        toastr.success(response.message);\n        $(\".table #\" + productId).remove();\n    })\n});\n\n$(\"#add-product button\").on(\"click\", function (e) {\n    e.preventDefault();\n    const name = $('#name').val();\n    const description = $('#description').val();\n    const price = $('#price').val();\n    $.ajax({\n        method: \"POST\",\n        url: \"/\",\n        data: {\n            \"_token\": $(\"meta[name='csrf-token']\").attr(\"content\"),\n            name,\n            description,\n            price\n        }\n    }).fail(function (response) {\n        let errors = \"\";\n        for (const key in response.responseJSON.errors) {\n            errors += response.responseJSON.errors[key] + \" \";\n        };\n        toastr.error(errors);\n    }).done(function (response) {\n        toastr.success(response.message);\n        const addRow = $(\"<tr id=\" + response.product.id + \"></tr>\");\n        const formatedObject = {\n            id: response.product.id,\n            name: response.product.name,\n            description: response.product.description === null ? \"\" : response.product.description,\n            price: parseInt(response.product.price).toFixed(4),\n            created_at: response.product.created_at.split(\"T\").join(\" \").slice(0, 19),\n            updated_at: response.product.updated_at.split(\"T\").join(\" \").slice(0, 19)\n        }\n        for (const key in formatedObject) {\n            addRow.append(\"<td>\" + formatedObject[key] + \"</td>\");\n        }\n        addRow.append('<td><button type=\"button\" class=\"delete-btn btn btn-danger\"><i class=\"fas fa-trash\"></i></button> <button type=\"button\" class=\"edit-btn btn btn-warning\" data-toggle=\"modal\" data-target=\"#editModal\"><i class=\"fas fa-edit\"></i></button></td>');\n        $(\"tbody\").append(addRow);\n\n        $('#name').val(\"\");\n        $('#description').val(\"\");\n        $('#price').val(\"\");\n    })\n});\n\n$('table').delegate('.edit-btn', 'click', function (e) {\n    productId = $(this).parent().parent().get(0).id\n    const name = $(this).parent().siblings().eq(1).text();\n    const description = $(this).parent().siblings().eq(2).text();\n    const price = $(this).parent().siblings().eq(3).text();\n\n    $(\"#name-modal\").val(name);\n    $(\"#description-modal\").val(description);\n    $(\"#price-modal\").val(price);\n})\n"],"sourceRoot":""}